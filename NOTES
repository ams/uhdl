NOTES -*- org -*-

* TODO CADR4 [0/55]

** TODO A CONTROL (ACTL)
** TODO A MEMORY LATCH (ALATCH)
** TODO ALU0 (ALU0); ALU1 (ALU1)
** TODO ALU CARRY AND FUNCTION (ALUC4)
** TODO A MEMORY LEFT (AMEM0); A MEMORY RIGHT (AMEM1)
** TODO A&M PARITY (APAR)						 :NA:
** TODO BUS INTERFACE CABLES (BCPINS)					 :NA:
** TODO BUSINT CABLE TERMINATION (BCTERM)				 :NA:
** TODO BYPASS CAPACITORS (CAPS)					 :NA:
** TODO CLOCK DISTRIBUTION (CLOCKD)					 :NA:
** TODO PC, SPC CONTROL (CONTRL)
** TODO CONNECTOR PINS (CPINS)						 :NA:
** TODO DISPATCH RAM (DRAM0); DISPATCH RAM (DRAM1); DISPATCH RAM (DRAM2)
** TODO DISPATCH CONTROL (DSPCTL)
** TODO FLAGS, CONDITIONALS (FLAG)
** TODO INST. MODIFY OR (IOR)
** TODO IR PARITY (IPAR)						 :NA:
** TODO INSTRUCTION REGISTER (IREG)
** TODO INSTRUCTION WRITE REGISTER (IWR)
** TODO L REGISTER (L)
** TODO LOCATION COUNTER (LC)
** TODO LC CONTROL (LCC)
** TODO LAST PC (LPC)
** TODO M CONTROL (MCTL)
** TODO MEMORY DATA REGISTER (MD)
** TODO MEMORY DATA SELECTOR (MDS)
** TODO DRIVE MF ONTO M (MF)
** TODO M MEMORY LATCH (MLATCH)
** TODO M MEMORY (MMEM)
** TODO MASKER/OUTPUT SELECT (MO0); MASKER/OUTPUT SELECT (MO1)
** TODO MASK GENERATION (MSKG4)
** TODO NPC, IPC, PC (NPC)
** TODO OPC, DC, ZERO DRIVE (OPCD)
** TODO PDL BUFFER LEFT (PDL0); PDL BUFFER RIGHT (PDL1)
** TODO PDL BUFFER CONTROL (PDLCTL)
** TODO PDL INDEX AND POINTER (PDLPTR)
** TODO PDL BUFFER LATCH (PLATCH)
** TODO Q REGISTER (Q)
** TODO Q REGISTER CONTROL (QCTL)					 :NA:
** TODO SHIFTER RIGHT (SHIFT0); SHIFTER LEFT (SHIFT1)
** TODO SHIFT/MASK CONTROL (SMCTL)
** TODO SOURCE, DEST, OP DECODE (SOURCE)
** TODO SPC MEMORY AND POINTER (SPC)
** TODO SPC MEMORY LATCH (SPCLCH)
** TODO SPC MEMORY PARITY (SPCPAR)					 :NA:
** TODO SPC WRITE DATA SEL (SPCW)
** TODO PDP11 EXAMINE (IR, OB) (SPY1); PDP11 EXAMINE (A, M, FLAG2) (SPY2)
** TODO PARITY ERROR TRAP (TRAP)
** TODO VMEMORY CONTROL (VCTL1)
** TODO VMA/MD CONTROL (VCTL2)
** TODO VMA REGISTER (VMA)
** TODO VMA INPUT SELECTOR (VMAS)
** TODO VIRTUAL MEMORY MAP STAGE 0 (VMEM0)
** TODO VIRTUAL MEMORY MAP STAGE 1 (VMEM1); VIRTUAL MEMORY MAP STAGE 1 (VMEM2)
** TODO MAP OUTPUT DRIVE (VMEMDR)

* TODO IRAML [0/16]

** TODO MASTER CLOCK (CLOCK1)						 :NA:
** TODO MASTER CLOCK (CLOCK2)						 :NA:
** TODO PDP11 DEBUG INSTRUCTION (DEBUG)
** TODO BYPASS CAPACITORS (ICAPS)					 :NA:
** TODO I RAM CONTROL (ICTL)
** TODO IWR PARITY (IWRPAR)						 :NA:
** TODO BUS INTERFACE CABLES (MBCPIN) 					 :NA:
** TODO CONNECTOR PINS (MCPINS) 					 :NA:
** TODO OVERLORD (OLORD1)
** TODO OVERLORD (OLORD2)
** TODO OLD PC SAVE SHIFTER (OPCS)
** TODO DISPATCH CONTROL (PCTL)
** TODO PROM 0-511 (PROM0); PROM 512-1023 (PROM1)
** TODO RAM 0K-4K, 0-11 (IRAM00); RAM 4K-8K, 0-11 (IRAM01); RAM 8K-12K, 0-11 (IRAM02); RAM 12K-16K, 0-11 (IRAM03); RAM 0K-4K, 12-24 (IRAM10); RAM 4K-8K 12-23 (IRAM11); RAM 8K-12K, 12-23 (IRAM12); (IRAM13); RAM 0K-4K, 24-35 (IRAM20); RAM 4K-8K, 24-35 (IRAM21); RAM8K-12K, 24-35 (IRAM22); RAM 12K-16K, 24-35 (IRAM23); RAM 0K-4K, 36-48 (IRAM30); RAM 4K-8K, 36-48 (IRAM31); RAM 8K-12K, 36-48 (IRAM32); RAM 12K-16K, 36-48 (IRAM33)
** TODO PDP11 EXAMINE CONTROL (SPY0); PDP11 EXAMINE (OPC, FLAG1, PC) (SPY4)
** TODO STATISTICS COUNTER (STAT)

* TODO BUSINT [0/35]

** TODO BUS PARITY (BUSPAR)
** TODO BUS FROM UNIBUS (BUSSEL)
** TODO BYPASS CAPACITORS (CAPS)
** TODO CABLES TO PROCESSOR (CLM)
** TODO TEST POINTS (CTP)
** TODO UNIBUS SPC CONNS (CUBUS)
** TODO XBUS BACKPLANE CONNS (CXBUS)
** TODO DATA PATH CONTROL (DATCTL)
** TODO DEBUGEE DATA PATH (DBGIN)
** TODO DEBUGER DATA PATH (DBGOUT)
** TODO DIAGNOSTIC BUS (DIAG)
** TODO DATA PATH - ADDRESS (DPADR)
** TODO DATA PATH - XBUS DATA (DPDATA)
** TODO ADDRESS FROM LISP MACHINE (LMADR)
** TODO PROCESSOR DATA XCVR (LMDATA)
** TODO READ BUFFER (RBUF)
** TODO ERROR LOGIC (REQERR)
** TODO XBUS REQ & ACK (REQLM)
** TODO XBUS & UNIBUS TIMEOUT (REQTIM)
** TODO XBUS REQUEST FROM UNIBUS (REQU)
** TODO LM & DEBUG TO UNIBUS (REQUB)
** TODO REQUEST SYNCHRONIZER (RQSYNC)
** TODO UNIBUS ADDRESS TRANSCEIVERS (UBA)
** TODO UNIBUS SLAVE RESPONSE (UBCYC)
** TODO UNIBUS DATA TRANSCEIVERS (UBD)
** TODO UNIBUS INTERRUPT CONTROL (UBINTC)
** TODO UNIBUS MAP (UBMAP)
** TODO UNIBUS MASTERSHIP (UBMAST)
** TODO UNIBUS ADDRESS TO XBUS (UBXA)
** TODO UNIBUS BUS GRANT (UPRIOR)
** TODO WRITE BUFFER (WBUF)
** TODO XBUS ADDRESS TRANSCEIVERS (XA)
** TODO XBUS ADDRESS PARITY (XAPAR)
** TODO XBUS TO BUS (XBD)
** TODO XBUS DATA TRANSCEIVERS (XD)

* TODO IOB [0/27]

** TODO 60 CYCLE CLOCK & GPIO (CLK60H)
** TODO INTERVAL TIMER (CLKTIM)
** TODO TIME OF DAY CLOCKS (CLKTOD)
** TODO BACKPLANE CONNECTIONS (HEXSPC)
** TODO UNIBUS ADDRESS (IOBADR)
** TODO KEYBOARD, MOUSE CLOCK SYNC (IOBCLK)
** TODO KEYBOARD & MOUSE CSR (IOBCSR)
** TODO UNIBUS INTERRUPT (IOBINT)
** TODO (IOBJPS)						    :MISSING:
** TODO KEYBOARD CONTROL (IOBKBD)
** TODO MOUSE 2 (IOBMS2)
** TODO MOUSE INTERFACE (IOBMSE)
** TODO SERIAL COMMUNICATIONS (IOBSER)
** TODO UNIBUS TRANSCEIVER (IOBXCV)
** TODO (LMDATP)						    :MISSING:
** TODO (LMDETC)						    :MISSING:
** TODO (LMLNDR)						    :MISSING:
** TODO (LMMODU)						    :MISSING:
** TODO (LMMYNM)						    :MISSING:
** TODO (LMRBUF)						    :MISSING:
** TODO (LMRCLK)						    :MISSING:
** TODO (LMRCTL)						    :MISSING:
** TODO (LMTBFCT)						    :MISSING:
** TODO (LMTBUF)						    :MISSING:
** TODO (LMTCLK)						    :MISSING:
** TODO (LMTURN)						    :MISSING:
** TODO (LMUCON)						    :MISSING:

* TODO TV4B [0/25]

** TODO (CAPS)							    :MISSING:
** TODO (COLOR)							    :MISSING:
** TODO MECL CLOCK (ECLCLK)
** TODO MECL SIP TERMINATORS (ECLSIP)
** TODO MECL VIDEO (ECLVID)
** TODO CUSTOMIZE FOR 4 BIT VERSION (GEN4B)
** TODO (RAMA)							    :MISSING:
** TODO RAM ADDRESS LOGIC (RAMADR)
** TODO (RAMB)							    :MISSING:
** TODO ADDRESS BUFFERS (RAMBUF)
** TODO (RAMC)							    :MISSING:
** TODO RAM CAS/RAS (RAMCAS)
** TODO (RAMD)							    :MISSING:
** TODO RAM OUTPUT REGISTERS (RAMREG)
** TODO 64 BIT SHIFT REGISTER (RAMSHF)
** TODO SYNC PROGRAM ADDRESS (SYNADR)
** TODO CLOCK GENERATOR (SYNCLK)
** TODO SYNC PROGRAM RAM (SYNRAM)
** TODO SYNC PROGRAM REG & REPEAT (SYNREG)
** TODO (TVINC)							    :MISSING:
** TODO TV MA (TVMA)
** TODO XBUS ADDRESS LOGIC (XBADR)
** TODO XBUS CONTROL (XBCTL)
** TODO XBUS DATA XCVR (XBDATA)
** TODO BACKPLANE CONNECTIONS (XBUS)

* TODO DC [0/28]

** TODO BUSY, LOSSAGE (DCBUSY)
** TODO CAPACITORS (DCCAPS)
** TODO CHANNEL CONTROL WORD (DCCCW)
** TODO DMA CHANNEL CONTROL (DCCHAN)
** TODO CLOCKS (DCCLK)
** TODO COMMAND LIST POINTER (DCCLP)
** TODO COMMAND (DCCMD)
** TODO DISK ADDRESS (DCDA)
** TODO DISK BUS (DCDBUS)
** TODO ERROR CHECKING AND CORRECTION (DCECC)
** TODO EDGE CONNECTIONS (DCEDGE)
** TODO HEADER COMPARE (DCHDCM)
** TODO PARITY (DCPAR)
** TODO BIT POSITION COUNTER (DCPOSC)
** TODO READ BUFFER (DCRBUF)
** TODO REGISTER ADDRESSING (DCREG)
** TODO SHIFT REGISTER (DCSH)
** TODO STATUS (DCSTS)
** TODO TIMEOUT (DCTMOT)
** TODO SINGLE TRIDENT (DCTRID)
** TODO (DCTRSC)
** TODO TRIDENT SIGNAL CABLE (DCTRSG)
** TODO MICROCODE CONTROL (DCUC)
** TODO MICROCODE INSTRUCTION (DCUI)
** TODO WRITE BUFFER (DCWBUF)
** TODO XBUS ADDRESS XCVRS (DCXBSA)
** TODO XBUS DATA TRANSCEIVERS (DCXBUS)
** TODO BACKPLANE CONNECTIONS (XBUS)

* TODO UBCHNI [0/19]

** TODO UNIBUS OUTPUT (LMDATP)
** TODO DETECTOR (LMDETC)
** TODO (LMLNDR)						    :MISSING:
** TODO SERIAL MODULATOR (LMMODU)
** TODO FIND MSGS DESTINED FOR ME (LMMYNM)
** TODO RECEIVER BUFFER (LMRBUF)
** TODO RECEIVE CLOCK (LMRCLK)
** TODO RECEIVE CONTROL (LMRCTL)
** TODO TRANSMIT CONTROL (LMTBFC)
** TODO TRANSMIT BUFFER (LMTBUF)
** TODO TRANSMIT CLOCK (LMTCLK)
** TODO MY TURN TIMER (LMTURN)
** TODO UNIBUS CONTROL (LMUCON)
** TODO UNIBUS ADDRESS (QADADR)
** TODO CONN TO TRANSCEIVER (QADJPS)
** TODO INTERVAL TIMER (QADTIM)
** TODO (QUBBPL)						    :MISSING:
** TODO (QUBINT)						    :MISSING:
** TODO (QUBXCV)						    :MISSING:

* Chapters 2

00_ACTL
01_ALATCH
02_ALU0
03_ALU1
04_ALUC4
05_AMEM0
06_AMEM1
07_APAR
08_BCPINS
09_BCTERM
10_CAPS
11_CLOCKD
12_CONTRL
13_CPINS
14_DRAM0
15_DRAM1
16_DRAM2
17_DSPCTL
18_FLAG
19_IOR
20_IPAR
21_IREG
22_IWR
23_L
24_LC
25_LCC
26_LPC
27_MCTL
28_MD
29_MDS
30_MF
31_MLATCH
32_MMEM
33_MO0
34_MO1
35_MSKG4
36_NPC
37_OPCD
38_PDL0
39_PDL1
40_PDLCTL
41_PDLPTR
42_PLATCH
43_Q
44_QCTL
45_SHIFT0
46_SHIFT1
47_SMCTL
48_SOURCE
49_SPC
50_SPCLCH
51_SPCPAR
52_SPCW
53_SPY1
54_SPY2
55_TRAP
56_VCTL1
57_VCTL2
58_VMA
59_VMAS
60_VMEM0
61_VMEM1
62_VMEM2
63_VMEMDR
64_CLOCK1
65_CLOCK2
66_DEBUG
67_ICAPS
68_ICTL
69_IWRPAR
70_MBCPIN
71_MCPINS
72_OLORD1
73_OLORD2
74_OPCS
75_PCTL
76_PROM0
77_PROM1
78_IRAM00
79_IRAM01
80_IRAM02
81_IRAM03
82_IRAM10
83_IRAM11
84_IRAM12
85_IRAM13
86_IRAM20
87_IRAM21
88_IRAM22
89_IRAM23
90_IRAM30
91_IRAM31
92_IRAM32
93_IRAM33
94_SPY0
95_SPY4
96_STAT

* ALUC4 mods

   always @* begin
      case ({alusub, aluadd}) 
	2'b00: begin
	   aluf = {ir[3], ir[4], ~ir[6], ~ir[5]};
	   alumode = ~ir[7];
	   cin0 = ir[2];
	end
	2'b01: begin 
	   aluf = {1'b1, 1'b0, 1'b0, 1'b1};
	   alumode = 1'b0;
	   cin0 = 1'b0; 
	end
	2'b10: begin 
	   aluf = {1'b0, 1'b1, 1'b1, 1'b0};
	   alumode = 1'b0;
	   cin0 = ~irjump;
	end
	2'b11: begin 
	   aluf = {1'b1, 1'b1, 1'b1, 1'b1};
	   alumode = 1'b1;
	   cin0 = 1'b1;
	end
      endcase
   end

* Command reference

make sure ftdi_sio is unloaded before hooking up chipscope, otherwise
you will get the following error:

  $ tools/jtag/xilinx_xvc.py ftdi 0
  FTDI Driver error in function FT_Open: FT_DEVICE_NOT_OPENED (3)

rmmod ftdi_sio

chipscope:

xvcd/xvcd &
/opt/Xilinx/14.7/ISE_DS/ISE/bin/lin64/analyzer

or

python2 playtag/tools/jtag/xilinx_xvc.py ftdi 0 &
/opt/Xilinx/14.7/ISE_DS/ISE/bin/lin64/analyzer

setup:

xilinx_xvc host=127.0.0.1:2542 disableversioncheck=true

fpgprog:

fpgaprog/fpgaprog -r  -v -b fpgaprog/bscan_spi_lx45_csg324.bit -f ise/top.bit

fpgaprog/fpgaprog -v -f ise/top_niox.bit
fpgaprog/fpgaprog -v -f ise/top.bit
